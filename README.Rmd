---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# Rtinycc

<!-- badges: start -->
[![R-CMD-check](https://github.com/sounkou-bioinfo/Rtinycc/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/sounkou-bioinfo/Rtinycc/actions/workflows/R-CMD-check.yaml)
<!-- badges: end -->

We provide a simple R interface to the TinyCC (TCC) compiler including the cli and the libtcc library.

## Installation

``` r
remotes::install_github("sounkou-bioinfo/Rtinycc")
```

## Example

### CLI

```{r}
library(Rtinycc)
tcc_dir <- tcc_prefix()
# CLI compile to object
src <- system.file("c_examples", "forty_two.c", package = "Rtinycc")
out <- tempfile(fileext = ".o")
inc_args <- as.character(paste0("-I", tcc_include_paths()))
status <- tcc_run_cli(c(inc_args, "-c", src, "-o", out))
status
```
### In memory using libtcc

```{r}
# libtcc in-memory compile
state <- tcc_state(output = "memory")
code <- "int forty_two(){ return 42; }"
tcc_compile_string(state, code)
tcc_relocate(state)
tcc_call_symbol(state, "forty_two", return = "int")
tcc_get_symbol(state, "forty_two")
```
## License

GPL-3

# References

- [tinycc](https://github.com/TinyCC/tinycc)