TINYCC_DIR = ../inst/tinycc
PKG_CPPFLAGS = -I$(TINYCC_DIR)/include -I$(TINYCC_DIR)/lib/tcc/include

# Link against libtcc.dll directly (like Unix links against .so/.dylib).
# At runtime, install.libs.R copies libtcc.dll next to Rtinycc.dll so
# the Windows loader finds it via same-directory search (rpath equivalent).
LIBTCC_DLL := $(wildcard $(TINYCC_DIR)/lib/libtcc.dll)

ifneq ($(LIBTCC_DLL),)
	PKG_LIBS = $(LIBTCC_DLL)
else
	PKG_LIBS = -L$(TINYCC_DIR)/lib -ltcc
endif

all: $(SHLIB)
